# 데이터 표현과 저장

## 변수의 스코프와 수명주기

### 외부 변수와 내부 변수

외부 변수와 내부 변수는 변수의 접근 범위와 수명을 결정하는 중요한 개념임. 이들은 프로그램의 모듈화와 데이터 관리에 큰 영향을 미침.

#### 외부 변수

외부 변수는 여러 소스 파일에서 공유할 수 있는 전역 변수임.

특징:

- 한 파일에서 선언하고 다른 파일에서 `extern` 키워드로 참조 가능
- 프로그램 전체에서 접근 가능하며, 프로그램 종료 시까지 존재함
- 초기화하지 않으면 자동으로 0으로 초기화됨

외부 변수 사용 예시:

```c
// config.c
int globalConfig = 100;  // 외부 변수 선언

// main.c
#include <stdio.h>

extern int globalConfig;  // 외부 변수 참조

void updateConfig(int newValue) {
    globalConfig = newValue;
}

int main() {
    printf("현재 설정값: %d\n", globalConfig);
    updateConfig(200);
    printf("변경된 설정값: %d\n", globalConfig);
    return 0;
}
```

이 예시에서 `globalConfig`는 여러 파일에서 공유되는 설정값으로 사용됨.

#### 내부 변수

내부 변수는 `static` 키워드로 선언되며, 해당 파일 내에서만 접근 가능한 변수임.

특징:

- 선언된 파일 내에서만 사용 가능
- 다른 파일의 동명 변수와 충돌하지 않음
- 프로그램 시작 시 초기화되고 종료 시 소멸됨

내부 변수 사용 예시:

```c
// module.c
#include <stdio.h>

static int moduleCounter = 0;  // 내부 변수 선언

void incrementModuleCounter() {
    moduleCounter++;
    printf("모듈 내부 카운터: %d\n", moduleCounter);
}

// main.c
extern void incrementModuleCounter();  // 함수 선언

int main() {
    for (int i = 0; i < 3; i++) {
        incrementModuleCounter();
    }
    // printf("%d\n", moduleCounter);  // 컴파일 오류: moduleCounter에 접근 불가
    return 0;
}
```

이 예시에서 `moduleCounter`는 `module.c` 파일 내에서만 접근 가능한 내부 상태를 관리함.

#### 외부 변수와 내부 변수의 활용

1. 외부 변수 활용:
    - 전역 설정값 관리
    - 여러 모듈 간 데이터 공유
    - 프로그램 전체의 상태 추적

    ```c
    // config.c
    int debugMode = 0;  // 외부 변수로 디버그 모드 설정

    // logger.c
    #include <stdio.h>
    extern int debugMode;

    void log(const char* message) {
        if (debugMode) {
            printf("DEBUG: %s\n", message);
        }
    }

    // main.c
    extern int debugMode;
    extern void log(const char* message);

    int main() {
        debugMode = 1;  // 디버그 모드 활성화
        log("프로그램 시작");
        // 프로그램 로직...
        return 0;
    }
    ```

2. 내부 변수 활용:
    - 모듈 내부 상태 관리
    - 파일 범위의 캐시 구현
    - 모듈별 독립적인 카운터 또는 식별자 생성

    ```c
    // uniqueID.c
    #include <stdio.h>

    static int lastID = 0;  // 내부 변수로 ID 추적

    int generateUniqueID() {
        return ++lastID;
    }

    void printLastGeneratedID() {
        printf("마지막으로 생성된 ID: %d\n", lastID);
    }
    ```

외부 변수와 내부 변수를 적절히 사용하면 프로그램의 구조를 개선하고 데이터 관리를 효율적으로 할 수 있음. 외부 변수는 신중히 사용해야 하며, 가능한 내부 변수를 통해 모듈의 독립성을 유지하는 것이 좋음.
