# 변수의 생명 주기와 스코프

## 지역 변수와 전역 변수

C 언어에서 변수의 생명 주기와 접근 가능 범위는 변수가 선언된 위치에 따라 결정됨. 지역 변수와 전역 변수는 이러한 특성에 따라 구분되는 두 가지 주요 변수 유형임.

### 지역 변수 (Local Variables)

1. 정의
   - 함수나 블록 내에서 선언된 변수
   - 선언된 블록 내에서만 접근 가능

2. 특징
   - 함수 호출 시 생성되고, 함수 종료 시 소멸됨
   - 자동 저장 기간 (auto storage duration)을 가짐
   - 스택 메모리에 할당됨

3. 예제

   ```c
   void func() {
       int x = 10;  // 지역 변수
       printf("%d\n", x);
   }  // x는 여기서 소멸됨

   int main() {
       func();
       // printf("%d\n", x);  // 오류: x에 접근 불가
       return 0;
   }
   ```

4. 장점
   - 메모리 효율성: 필요할 때만 메모리 사용
   - 범위 제한: 변수 충돌 방지
   - 재진입성: 함수의 재진입 가능

5. 단점
   - 함수 호출 간 데이터 유지 불가

### 전역 변수 (Global Variables)

1. 정의
   - 모든 함수의 외부에서 선언된 변수
   - 프로그램의 어느 부분에서나 접근 가능

2. 특징
   - 프로그램 시작 시 생성되고, 프로그램 종료 시 소멸됨
   - 정적 저장 기간 (static storage duration)을 가짐
   - 데이터 세그먼트에 할당됨

3. 예제

   ```c
   int global_var = 100;  // 전역 변수

   void func() {
       printf("%d\n", global_var);
   }

   int main() {
       func();
       global_var = 200;
       printf("%d\n", global_var);
       return 0;
   }
   ```

4. 장점
   - 전체 프로그램에서 데이터 공유 용이
   - 함수 간 데이터 전달 간편

5. 단점
   - 전역 네임스페이스 오염
   - 모듈성 저하
   - 동시성 프로그래밍에서 문제 발생 가능

### 지역 변수와 전역 변수의 비교

1. 이름 충돌

   ```c
   int x = 10;  // 전역 변수

   void func() {
       int x = 20;  // 지역 변수
       printf("%d\n", x);  // 20 출력 (지역 변수가 우선)
   }

   int main() {
       printf("%d\n", x);  // 10 출력 (전역 변수)
       func();
       return 0;
   }
   ```

2. 초기화
   - 지역 변수: 자동으로 초기화되지 않음
   - 전역 변수: 0으로 자동 초기화됨

3. 가시성
   - 지역 변수: 선언된 블록 내에서만 visible
   - 전역 변수: 파일 전체에서 visible (extern 키워드로 다른 파일에서도 접근 가능)

### 사용 지침

1. 전역 변수 사용 최소화
2. const 한정자 활용하여 전역 상수 선언
3. 함수 매개변수를 통한 데이터 전달 선호
4. 필요 시 정적 지역 변수 (static local variable) 고려

지역 변수와 전역 변수의 적절한 사용은 프로그램의 구조, 가독성, 유지보수성에 큰 영향을 미침. 일반적으로 지역 변수 사용을 선호하며, 전역 변수는 꼭 필요한 경우에만 신중히 사용해야 함.
