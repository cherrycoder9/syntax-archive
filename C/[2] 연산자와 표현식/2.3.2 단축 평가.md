# 논리 연산자

## 단축 평가 (Short-circuit evaluation)

단축 평가는 C 언어의 `&&`와 `||` 연산자가 가진 중요한 특성임. 이 평가 방식은 코드 최적화와 특정 프로그래밍 패턴에서 핵심적인 역할을 함.

### 동작 원리

1. `&&` (AND) 연산자:
   - 왼쪽 피연산자가 거짓이면, 오른쪽은 평가하지 않음
   - 전체 결과가 이미 거짓으로 확정되기 때문

2. `||` (OR) 연산자:
   - 왼쪽 피연산자가 참이면, 오른쪽은 평가하지 않음
   - 전체 결과가 이미 참으로 확정되기 때문

### 활용 예시

1. 널 포인터 체크:

    ```c
    char *str = NULL;
    if (str && str[0] == 'A') {
        // str이 NULL이면 str[0] 평가 안 함
        printf("문자열이 'A'로 시작함\n");
    }
    ```

2. 나누기 연산 전 0 체크:

    ```c
    int denominator = 0;
    int result = (denominator != 0) && (10 / denominator > 0);
    // denominator가 0이면 나누기 연산 수행 안 함
    ```

3. 리소스 할당과 사용:

    ```c
    FILE *file = fopen("data.txt", "r");
    file && fprintf(file, "데이터 쓰기\n");
    // 파일 열기 실패하면 fprintf 실행 안 함
    ```

### 장점

1. 성능 향상: 불필요한 연산 줄임
2. 런타임 에러 방지: 잠재적 오류 상황 회피
3. 코드 간결화: 중첩된 if문 줄일 수 있음

### 주의사항

1. 부작용(side effect)이 있는 표현식 사용 시 주의:

    ```c
    int i = 0;
    (i++ < 5) || (i = 10);
    // i는 1이 됨, 두 번째 표현식 실행 안 됨
    ```

2. 가독성 고려: 과도한 사용은 코드 이해 어렵게 만들 수 있음

3. 디버깅 시 주의: 브레이크포인트가 건너뛰어질 수 있음

### 실전 응용

복잡한 조건에서의 활용:

```c
typedef struct {
    char *name;
    int age;
} Person;

void printPersonInfo(Person *p) {
    // 널 체크와 조건 검사를 한 번에
    p && p->name && p->age >= 18 && printf("%s는 성인임\n", p->name);
}
```

이 코드는 Person 포인터가 유효하고, 이름이 존재하며, 나이가 18 이상일 때만 출력함. 단축 평가로 안전하고 간결한 코드 작성 가능.

단축 평가는 C 프로그래밍의 강력한 도구지만, 적절히 사용해야 함. 코드의 명확성과 안전성을 높이는 데 활용하되, 과도한 사용은 피하는 게 좋음.
