# 다형성

## instanceof 연산자

### instanceof 연산자의 개념

`instanceof` 연산자는 객체가 특정 클래스의 인스턴스인지 확인하는 도구임. 이를 통해 안전한 다운캐스팅을 구현할 수 있음. 객체가 지정된 클래스나 그 하위 클래스의 인스턴스면 `true`, 아니면 `false`를 반환함.

#### instanceof 연산자의 사용 목적

1. **타입 확인**: 객체의 실제 클래스 확인
2. **안전한 캐스팅**: 다운캐스팅 전 타입 체크로 `ClassCastException` 방지

### instanceof 연산자 예제

```java
class Animal {
    void makeSound() {
        System.out.println("동물 소리");
    }
}

class Dog extends Animal {
    @Override
    void makeSound() {
        System.out.println("멍멍");
    }

    void fetch() {
        System.out.println("공 가져오기");
    }
}

class Cat extends Animal {
    @Override
    void makeSound() {
        System.out.println("야옹");
    }

    void scratch() {
        System.out.println("긁기");
    }
}

public class Main {
    public static void main(String[] args) {
        Animal myAnimal1 = new Dog();
        Animal myAnimal2 = new Cat();

        // instanceof로 타입 확인 및 안전한 다운캐스팅
        if (myAnimal1 instanceof Dog) {
            Dog myDog = (Dog) myAnimal1;
            myDog.fetch();
        }

        if (myAnimal2 instanceof Cat) {
            Cat myCat = (Cat) myAnimal2;
            myCat.scratch();
        }
    }
}
```

이 예제에서 `instanceof`로 객체 타입을 확인한 후 안전하게 다운캐스팅하여 자식 클래스의 메서드를 호출함.

### instanceof 연산자의 실제 사용 사례

`instanceof`는 다양한 타입의 객체를 처리할 때 유용함. 타입에 따라 다른 로직을 실행할 수 있음.

#### GUI 이벤트 처리 예제

```java
class Event {}

class ClickEvent extends Event {
    void click() {
        System.out.println("버튼 클릭됨");
    }
}

class KeyEvent extends Event {
    void pressKey() {
        System.out.println("키 눌림");
    }
}

public class EventProcessor {
    public void processEvent(Event event) {
        if (event instanceof ClickEvent) {
            ((ClickEvent) event).click();
        } else if (event instanceof KeyEvent) {
            ((KeyEvent) event).pressKey();
        } else {
            System.out.println("알 수 없는 이벤트");
        }
    }

    public static void main(String[] args) {
        var processor = new EventProcessor();

        Event clickEvent = new ClickEvent();
        Event keyEvent = new KeyEvent();

        processor.processEvent(clickEvent);
        processor.processEvent(keyEvent);
    }
}
```

이 예제에서 `EventProcessor`는 `instanceof`로 이벤트 객체 타입을 확인하고 적절한 메서드를 호출함.

#### 데이터 처리 예제

```java
class Data {}

class TextData extends Data {
    void processText() {
        System.out.println("텍스트 데이터 처리 중");
    }
}

class ImageData extends Data {
    void processImage() {
        System.out.println("이미지 데이터 처리 중");
    }
}

public class DataProcessor {
    public void processData(Data data) {
        if (data instanceof TextData) {
            ((TextData) data).processText();
        } else if (data instanceof ImageData) {
            ((ImageData) data).processImage();
        } else {
            System.out.println("알 수 없는 데이터 타입");
        }
    }

    public static void main(String[] args) {
        var processor = new DataProcessor();

        Data textData = new TextData();
        Data imageData = new ImageData();

        processor.processData(textData);
        processor.processData(imageData);
    }
}
```

이 예제에서 `DataProcessor`는 `instanceof`로 데이터 객체 타입을 확인하고 적절한 처리 메서드를 호출함.
