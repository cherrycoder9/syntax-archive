# 예외 처리

## 예외 처리 구문

### try-catch 블록 구조

try-catch 블록은 자바에서 예외를 처리하는 기본적인 방법임. try 블록에는 예외가 발생할 수 있는 코드를, catch 블록에는 예외 발생 시 실행할 처리 로직을 작성함.

```java
try {
    int result = 100 / 0;  // ArithmeticException 발생
    System.out.println("이 코드는 실행되지 않음");
} catch (ArithmeticException e) {
    System.out.println("0으로 나눌 수 없음: " + e.getMessage());
}
```

이 구조의 장점은 예외 발생 시 프로그램이 비정상적으로 종료되는 것을 방지하고, 적절한 대응을 할 수 있다는 점임.

### catch 블록의 다양한 활용

catch 블록은 다양한 방식으로 활용할 수 있음:

1. 예외 정보 출력하기:

    ```java
    try {
        // 예외 발생 가능 코드
    } catch (Exception e) {
        e.printStackTrace();  // 스택 트레이스 출력
        System.out.println("예외 메시지: " + e.getMessage());
    }
    ```

2. 로그 기록하기:

    ```java
    import java.util.logging.Logger;

    public class ExceptionLoggingExample {
        private static final Logger logger = Logger.getLogger(ExceptionLoggingExample.class.getName());

        public static void main(String[] args) {
            try {
                // 예외 발생 가능 코드
            } catch (Exception e) {
                logger.severe("심각한 오류 발생: " + e.getMessage());
            }
        }
    }
    ```

3. 예외 전환하기:

    ```java
    try {
        // 파일 읽기 작업
    } catch (IOException e) {
        throw new RuntimeException("파일 처리 중 오류 발생", e);
    }
    ```

### 다중 catch 블록과 예외 처리 순서

여러 종류의 예외를 처리할 때는 다중 catch 블록을 사용함. 이때 주의할 점은 예외 처리 순서임. 더 구체적인 예외를 먼저 처리하고, 일반적인 예외를 나중에 처리해야 함.

```java
try {
    int[] arr = new int[5];
    arr[10] = 50 / 0;  // ArithmeticException 또는 ArrayIndexOutOfBoundsException 발생 가능
} catch (ArithmeticException e) {
    System.out.println("산술 연산 예외: " + e.getMessage());
} catch (ArrayIndexOutOfBoundsException e) {
    System.out.println("배열 인덱스 초과: " + e.getMessage());
} catch (Exception e) {
    System.out.println("기타 예외 발생: " + e.getMessage());
}
```

### 다중 예외 처리 (Java 7+)

Java 7부터는 하나의 catch 블록에서 여러 예외를 동시에 처리할 수 있음. 이 방식은 코드 중복을 줄이고 가독성을 높일 수 있음.

```java
try {
    // 예외 발생 가능 코드
} catch (IOException | SQLException e) {
    System.out.println("입출력 또는 SQL 예외 발생: " + e.getMessage());
    // 두 예외에 대한 공통 처리 로직
} catch (Exception e) {
    System.out.println("기타 예외 발생");
}
```

### try-with-resources 구문 (Java 7+)

Java 7에서 도입된 try-with-resources 구문은 자원을 자동으로 관리하여 finally 블록 없이도 안전하게 자원을 해제할 수 있게 해줌.

```java
try (FileInputStream fis = new FileInputStream("test.txt");
     BufferedReader br = new BufferedReader(new InputStreamReader(fis))) {
    String line;
    while ((line = br.readLine()) != null) {
        System.out.println(line);
    }
} catch (IOException e) {
    System.out.println("파일 읽기 오류: " + e.getMessage());
}
```

이 구문을 사용하면 try 블록이 종료될 때 자동으로 자원이 해제되므로, 명시적인 close() 호출이 불필요함.

try-catch 구문을 적절히 활용하면 예외 상황에 대해 더 견고하고 유연한 프로그램을 작성할 수 있음. 예외 처리는 단순히 오류를 잡는 것이 아니라, 프로그램의 안정성과 신뢰성을 높이는 중요한 기법임을 명심해야 함.
