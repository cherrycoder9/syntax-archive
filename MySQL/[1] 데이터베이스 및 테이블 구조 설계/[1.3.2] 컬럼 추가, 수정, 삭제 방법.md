# 테이블 구조 변경 및 관리

## 컬럼 추가, 수정, 삭제 방법

테이블의 컬럼을 관리하려면 `ALTER TABLE` 문을 씀. 이걸로 컬럼을 추가하거나, 수정하거나, 삭제할 수 있음.

### 컬럼 추가하기

테이블에 새 컬럼을 넣을 때는 `ADD COLUMN` 키워드를 씀. 새 컬럼의 데이터 타입과 제약 조건도 같이 정해야 함.

새 컬럼을 추가하는 SQL 문은 다음과 같음.

```sql
ALTER TABLE products
ADD COLUMN stock INT NOT NULL DEFAULT 0;
```

### 컬럼 수정하기

이미 있는 컬럼의 데이터 타입이나 제약 조건을 바꿀 때는 `MODIFY COLUMN`이나 `CHANGE COLUMN` 키워드를 씀.

- `MODIFY COLUMN`: 컬럼의 데이터 타입이나 제약 조건만 바꿀 때 씀
- `CHANGE COLUMN`: 컬럼의 이름과 속성을 모두 바꿀 때 씀

컬럼의 데이터 타입을 수정하는 SQL 문은 다음과 같음.

```sql
ALTER TABLE products
MODIFY COLUMN stock BIGINT NOT NULL;
```

컬럼의 이름과 데이터 타입을 한꺼번에 수정하는 SQL 문은 다음과 같음.

```sql
ALTER TABLE products
CHANGE COLUMN stock inventory_count BIGINT NOT NULL;
```

### 컬럼 삭제하기

더 이상 필요 없는 컬럼을 지울 때는 `DROP COLUMN` 키워드를 씀.

컬럼을 삭제하는 SQL 문은 다음과 같음.

```sql
ALTER TABLE products
DROP COLUMN inventory_count;
```

### 컬럼 관리할 때 주의할 점

- 컬럼을 추가하거나 수정할 때는 기존 데이터랑 잘 맞는지 확인할 것
- 컬럼을 지우기 전에는 꼭 백업해 둘 것
- 바꾸고 나서 데이터가 틀리지 않았는지 확인할 것

여러 가지 컬럼 관리 작업을 한꺼번에 하는 SQL 문은 다음과 같음.

```sql
-- 새 컬럼 추가하기
ALTER TABLE orders
ADD COLUMN order_status VARCHAR(20) NOT NULL DEFAULT 'pending';

-- 컬럼의 데이터 타입 바꾸기
ALTER TABLE orders
MODIFY COLUMN order_status VARCHAR(50);

-- 컬럼의 이름과 데이터 타입 한꺼번에 바꾸기
ALTER TABLE orders
CHANGE COLUMN order_status status VARCHAR(50);

-- 컬럼 지우기
ALTER TABLE orders
DROP COLUMN status;
```

컬럼을 관리하기 전에 다음 SQL 문으로 현재 테이블 구조를 확인해 볼 것.

```sql
SHOW COLUMNS FROM orders;
```

이 명령어로 `orders` 테이블의 모든 컬럼과 그 속성을 자세히 볼 수 있음.
