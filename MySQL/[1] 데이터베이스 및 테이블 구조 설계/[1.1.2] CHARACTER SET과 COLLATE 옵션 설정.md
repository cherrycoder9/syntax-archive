# 데이터베이스 생성과 관리

## CHARACTER SET과 COLLATE 옵션 설정

데이터베이스를 만들 때 문자 집합과 정렬 규칙을 정할 수 있음. 이게 데이터를 어떻게 저장하고 비교할지 결정함.

### 문자 집합(Character Set) 이해하기

- 문자 집합은 데이터베이스가 문자열을 어떻게 저장할지 정하는 거임
- 요즘엔 UTF-8을 많이 씀. 여러 나라 언어를 한번에 지원할 수 있어서임
- MySQL에선 `utf8mb4`를 쓰는 게 좋음. 이모지같은 특이한 문자도 저장할 수 있음

### 정렬 규칙(Collation) 알아보기

- 정렬 규칙은 데이터를 어떻게 순서 매기고 비교할지 정하는 거임
- 보통 `utf8mb4_unicode_ci` 같은 걸 많이 씀
- 이걸로 대소문자 구분할지 말지 같은 것도 정할 수 있음

### 실제로 설정해보기

이모지도 저장할 수 있는 데이터베이스를 만드는 SQL 문은 다음과 같음.

```sql
CREATE DATABASE cool_emoji_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;
```

이 명령어로 이모지도 저장할 수 있고, 대소문자 구분 없이 정렬하는 데이터베이스가 만들어짐.

### 이미 있는 데이터베이스 설정 바꾸기

만약 이미 만든 데이터베이스의 설정을 바꾸고 싶다면 다음 SQL 문을 사용하면 됨.

```sql
ALTER DATABASE old_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;
```

### 설정할 때 주의할 점

- 처음에 설정을 잘해놓는 게 중요함. 나중에 바꾸려면 골치 아플 수 있음
- 여러 나라 언어나 이모지 같은 특별한 문자를 쓸 거면 `utf8mb4`를 쓰는 게 좋음
- 설정을 바꾸면 기존 데이터에 영향을 줄 수 있으니 백업부터 하는 게 안전함

현재 데이터베이스의 문자 집합과 정렬 규칙을 확인하는 SQL 문은 다음과 같음.

```sql
SELECT @@character_set_database, @@collation_database;
```

이 명령어를 실행하면 현재 데이터베이스의 설정을 볼 수 있음. 설정을 바꾸기 전에 반드시 확인해 볼 것.
