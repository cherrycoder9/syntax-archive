# 테이블 구조 변경 및 관리

## 인덱스 생성과 삭제

인덱스는 데이터베이스 성능을 높이는 중요한 요소임. 인덱스를 쓰면 데이터를 더 빨리 찾을 수 있음. `CREATE INDEX`와 `DROP INDEX` 문으로 인덱스를 만들고 지울 수 있음.

### 인덱스 만들기

인덱스를 만들려면 `CREATE INDEX` 문을 씀. 어떤 열에 인덱스를 만들지 정하고, 인덱스 이름도 지어야 함.

한 개 열에 대한 인덱스를 만드는 SQL 문은 다음과 같음.

```sql
CREATE INDEX idx_last_name ON employees(last_name);
```

두 개 이상의 열을 기반으로 인덱스를 만들 수도 있음. 이걸 복합 열 인덱스라고 함.

```sql
CREATE INDEX idx_full_name ON employees(first_name, last_name);
```

### UNIQUE 인덱스 만들기

중복된 값을 허용하지 않는 인덱스를 만들려면 `UNIQUE` 키워드를 씀.

UNIQUE 인덱스를 만드는 SQL 문은 다음과 같음.

```sql
CREATE UNIQUE INDEX idx_unique_email ON users(email);
```

### 인덱스 지우기

인덱스를 지우려면 `DROP INDEX` 문을 씀. 어떤 테이블의 인덱스를 지울지 정해야 함.

인덱스를 지우는 SQL 문은 다음과 같음.

```sql
DROP INDEX idx_last_name ON employees;
```

### 인덱스 관리할 때 주의할 점

- 인덱스는 데이터를 찾는 속도를 빠르게 하지만, 데이터를 넣거나 바꾸거나 지울 때는 속도가 느려질 수 있음
- 인덱스를 너무 많이 만들면 성능에 안 좋은 영향을 줄 수 있으니 꼭 필요할 때만 만들 것
- 가끔씩 인덱스를 점검하고, 필요 없는 인덱스는 지울 것

여러 가지 인덱스 관리 작업을 하는 SQL 문은 다음과 같음.

```sql
-- 한 개 열에 대한 인덱스 만들기
CREATE INDEX idx_order_date ON orders(order_date);

-- 두 개 열에 대한 인덱스 만들기
CREATE INDEX idx_customer_product ON orders(customer_id, product_id);

-- 중복을 허용하지 않는 인덱스 만들기
CREATE UNIQUE INDEX idx_unique_username ON users(username);

-- 인덱스 지우기
DROP INDEX idx_order_date ON orders;
```

인덱스를 만들거나 지우기 전에 다음 SQL 문으로 현재 테이블의 인덱스를 확인해 볼 것.

```sql
SHOW INDEX FROM orders;
```

이 명령어로 `orders` 테이블의 모든 인덱스와 그 특성을 자세히 볼 수 있음.
