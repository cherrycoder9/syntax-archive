# 테이블 설계와 생성

## 제약 조건 설정 (PRIMARY KEY, FOREIGN KEY, UNIQUE, NOT NULL)

테이블 만들 때 데이터가 틀리지 않게 하려고 여러 가지 제약 조건을 넣을 수 있음. 주요 제약 조건으로는 PRIMARY KEY, FOREIGN KEY, UNIQUE, NOT NULL 등이 있음.

### PRIMARY KEY 알아보기

PRIMARY KEY는 각 행을 구분하는 고유한 값을 지정할 때 씀. PRIMARY KEY로 정한 열에는 빈 값을 넣을 수 없고, 모든 값이 서로 달라야 함.

PRIMARY KEY를 설정하는 테이블 만드는 SQL 문은 다음과 같음.

```sql
CREATE TABLE employees (
    employee_id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50)
);
```

### FOREIGN KEY 사용하기

FOREIGN KEY는 한 테이블의 열이 다른 테이블의 PRIMARY KEY와 연결되어 있다는 걸 나타냄. 이걸로 테이블 간의 관계를 정의하고 데이터가 틀리지 않게 함.

FOREIGN KEY를 설정하는 테이블 만드는 SQL 문은 다음과 같음.

```sql
CREATE TABLE departments (
    department_id INT PRIMARY KEY,
    department_name VARCHAR(50)
);

CREATE TABLE employees (
    employee_id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(department_id)
);
```

### UNIQUE 제약 조건 넣기

UNIQUE는 열의 모든 값이 서로 달라야 한다는 걸 의미함. 한 테이블에 여러 개의 UNIQUE 제약 조건을 넣을 수 있음.

UNIQUE 제약 조건을 설정하는 테이블 만드는 SQL 문은 다음과 같음.

```sql
CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE,
    email VARCHAR(100) UNIQUE
);
```

### NOT NULL 설정하기

NOT NULL은 해당 열에 빈 값을 넣지 못하게 하는 거임. 데이터 넣을 때 이 열에는 반드시 값을 넣어야 함.

NOT NULL 제약 조건을 설정하는 테이블 만드는 SQL 문은 다음과 같음.

```sql
CREATE TABLE products (
    product_id INT AUTO_INCREMENT PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);
```

### 제약 조건 넣을 때 생각해볼 점

- PRIMARY KEY는 테이블마다 하나만 넣을 수 있음
- FOREIGN KEY는 테이블 간의 관계를 정의해서 데이터가 틀리지 않게 함
- UNIQUE는 중복된 데이터가 들어가지 않게 함
- NOT NULL은 꼭 필요한 데이터를 빼먹지 않게 함

여러 제약 조건을 한꺼번에 넣은 테이블 만드는 SQL 문은 다음과 같음.

```sql
CREATE TABLE orders (
    order_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    product_id INT,
    order_date DATE NOT NULL,
    quantity INT NOT NULL,
    UNIQUE (user_id, product_id, order_date),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
```

제약 조건을 넣기 전에 다음 SQL 문으로 이미 있는 제약 조건을 확인해 볼 것.

```sql
SELECT * FROM information_schema.TABLE_CONSTRAINTS 
WHERE TABLE_SCHEMA = 'your_database_name';
```

이 명령어로 현재 데이터베이스에 있는 모든 제약 조건을 볼 수 있음.
