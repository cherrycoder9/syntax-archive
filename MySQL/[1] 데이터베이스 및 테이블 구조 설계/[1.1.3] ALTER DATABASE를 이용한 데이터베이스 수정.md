# 데이터베이스 생성과 관리

## ALTER DATABASE를 이용한 데이터베이스 수정

이미 만들어진 데이터베이스 설정을 바꿀 때 `ALTER DATABASE` 문을 씀. 주로 문자 집합이나 정렬 규칙을 바꿀 때 사용함.

### ALTER DATABASE 문법 알아보기

기본 구문은 이런 모양임.

```sql
ALTER DATABASE database_name
CHARACTER SET character_set_name
COLLATE collation_name;
```

### 실제로 데이터베이스 수정해보기

데이터베이스의 문자 집합과 정렬 규칙을 바꾸는 SQL 문은 다음과 같음.

```sql
ALTER DATABASE example_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;
```

### 바꿀 수 있는 주요 항목들

- **CHARACTER SET**: 데이터베이스가 쓰는 문자 집합을 바꿈
- **COLLATE**: 데이터베이스가 데이터를 정렬하는 방식을 바꿈

### 바꿀 때 생각해봐야 할 점들

- 데이터베이스 설정을 바꾸면, 테이블이나 열의 설정도 같이 바꾸는 게 좋음
- 문자 집합 바꿀 때 기존 데이터 망가지지 않게 조심해야 함
- 바꾼 후에 데이터베이스 성능이 어떻게 달라질지 미리 생각해봐야 함

### 데이터베이스랑 테이블 한꺼번에 바꾸기

데이터베이스와 테이블의 문자 집합과 정렬 규칙을 한 번에 바꾸는 SQL 문은 다음과 같음.

```sql
-- 데이터베이스 설정 바꾸기
ALTER DATABASE example_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

-- 테이블 설정도 같이 바꾸기
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### ALTER DATABASE 쓸 때 주의할 점

- 바꾸는 작업은 데이터베이스 크기에 따라 오래 걸릴 수 있음
- 바꾸는 동안 데이터베이스 쓰는 프로그램들이 영향 받을 수 있음
- 데이터 날아가는 걸 막으려면 먼저 백업해두는 게 좋음

다음 SQL 문으로 바꾸기 전에 현재 설정을 확인해 볼 것.

```sql
SELECT @@character_set_database, @@collation_database;
```
